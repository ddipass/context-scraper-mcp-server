# ğŸ”§ MCP æœåŠ¡å™¨ç®¡ç†æŒ‡å—

## ğŸ¯ å¿«é€Ÿæ“ä½œæµç¨‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# 1. æŸ¥çœ‹å½“å‰çŠ¶æ€
python manage_server.py status

# 2. ä¸€é”®å‡çº§åˆ°å¢å¼ºç‰ˆ
python manage_server.py upgrade

# 3. æŒ‰æç¤ºåœ¨æ–°ç»ˆç«¯å¯åŠ¨æœåŠ¡å™¨
cd /Users/dpliu/EC2/context-scraper-mcp-server
uv run --with mcp mcp run server.py

# 4. é‡å¯ Q Chat
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ“ä½œ

```bash
# 1. åœæ­¢å½“å‰æœåŠ¡å™¨
python manage_server.py stop

# 2. å¤‡ä»½å¹¶æ›¿æ¢
cp server.py server_backup.py
cp server_enhanced.py server.py

# 3. å¯åŠ¨æ–°æœåŠ¡å™¨
uv run --with mcp mcp run server.py

# 4. é‡å¯ Q Chat
```

## ğŸ“‹ è¯¦ç»†å‘½ä»¤è¯´æ˜

### ğŸ” æŸ¥çœ‹çŠ¶æ€
```bash
python manage_server.py status
```
æ˜¾ç¤ºï¼š
- æ–‡ä»¶å­˜åœ¨çŠ¶æ€
- è¿›ç¨‹è¿è¡ŒçŠ¶æ€  
- å½“å‰ç‰ˆæœ¬ä¿¡æ¯

### ğŸ›‘ åœæ­¢æœåŠ¡å™¨
```bash
python manage_server.py stop
```
åŠŸèƒ½ï¼š
- æŸ¥æ‰¾ç›¸å…³è¿›ç¨‹
- ä¼˜é›…åœæ­¢ (SIGTERM)
- å¼ºåˆ¶åœæ­¢ (SIGKILL)
- éªŒè¯åœæ­¢ç»“æœ

### ğŸš€ å‡çº§æœåŠ¡å™¨
```bash
python manage_server.py upgrade
```
æµç¨‹ï¼š
1. åœæ­¢å½“å‰æœåŠ¡å™¨
2. å¤‡ä»½åŸç‰ˆæ–‡ä»¶
3. éƒ¨ç½²å¢å¼ºç‰ˆæ–‡ä»¶
4. æç¤ºå¯åŠ¨å‘½ä»¤

### ğŸ”„ æ¢å¤å¤‡ä»½
```bash
python manage_server.py restore
```
ç”¨é€”ï¼š
- å¦‚æœå¢å¼ºç‰ˆæœ‰é—®é¢˜
- æ¢å¤åˆ°åŸç‰ˆæœåŠ¡å™¨
- ä¿æŒç³»ç»Ÿç¨³å®š

## ğŸ® å®Œæ•´æ“ä½œæ¼”ç¤º

### ç¬¬ä¸€æ¬¡å‡çº§æµç¨‹

```bash
# æ­¥éª¤ 1: æ£€æŸ¥å½“å‰çŠ¶æ€
$ python manage_server.py status
ğŸ“Š MCP æœåŠ¡å™¨çŠ¶æ€
========================================
ğŸ“ æ–‡ä»¶çŠ¶æ€:
  server.py: âœ… å­˜åœ¨
  server_enhanced.py: âœ… å­˜åœ¨
  server_backup.py: âŒ ä¸å­˜åœ¨
ğŸ”„ è¿è¡ŒçŠ¶æ€:
  âœ… è¿è¡Œä¸­ (1 ä¸ªè¿›ç¨‹)
    PID 58630
  ğŸ“¦ ç‰ˆæœ¬: åŸç‰ˆ

# æ­¥éª¤ 2: å‡çº§åˆ°å¢å¼ºç‰ˆ
$ python manage_server.py upgrade
ğŸš€ å¼€å§‹å‡çº§åˆ°å¢å¼ºç‰ˆæœåŠ¡å™¨...
ğŸ” æŸ¥æ‰¾è¿è¡Œä¸­çš„ MCP æœåŠ¡å™¨...
ğŸ“‹ æ‰¾åˆ° 1 ä¸ªç›¸å…³è¿›ç¨‹:
  PID 58630: /Users/dpliu/EC2/context-scraper-mcp-server/.venv/bin/python...
ğŸ›‘ åœæ­¢è¿›ç¨‹ 58630...
âœ… æˆåŠŸåœæ­¢ 1 ä¸ªæœåŠ¡å™¨è¿›ç¨‹
ğŸ’¾ å¤‡ä»½å½“å‰æœåŠ¡å™¨æ–‡ä»¶...
âœ… å¤‡ä»½ä¿å­˜åˆ°: server_backup.py
ğŸš€ å‡çº§åˆ°å¢å¼ºç‰ˆæœåŠ¡å™¨...
âœ… å¢å¼ºç‰ˆæœåŠ¡å™¨å·²éƒ¨ç½²
âœ… å‡çº§å®Œæˆï¼
ğŸš€ å¯åŠ¨ MCP æœåŠ¡å™¨...
ğŸ“ ä½¿ç”¨å‘½ä»¤: uv run --with mcp mcp run server.py
ğŸ’¡ è¯·åœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤:
   cd /Users/dpliu/EC2/context-scraper-mcp-server
   uv run --with mcp mcp run server.py

ğŸ”„ ç„¶åé‡å¯ Q Chat æˆ–é‡æ–°è¿æ¥ MCP æœåŠ¡å™¨

# æ­¥éª¤ 3: åœ¨æ–°ç»ˆç«¯å¯åŠ¨æœåŠ¡å™¨
$ cd /Users/dpliu/EC2/context-scraper-mcp-server
$ uv run --with mcp mcp run server.py

# æ­¥éª¤ 4: é‡å¯ Q Chat
# é€€å‡ºå½“å‰ Q Chat ä¼šè¯ï¼Œé‡æ–°å¯åŠ¨
```

## ğŸš¨ æ•…éšœæ’é™¤

### é—®é¢˜ 1: è¿›ç¨‹æ— æ³•åœæ­¢
```bash
# æŸ¥æ‰¾æ‰€æœ‰ç›¸å…³è¿›ç¨‹
ps aux | grep -E "(server\.py|context-scraper)" | grep -v grep

# æ‰‹åŠ¨å¼ºåˆ¶åœæ­¢
kill -9 <PID>
```

### é—®é¢˜ 2: å‡çº§åæœ‰é—®é¢˜
```bash
# æ¢å¤åˆ°åŸç‰ˆ
python manage_server.py restore

# æˆ–æ‰‹åŠ¨æ¢å¤
cp server_backup.py server.py
```

### é—®é¢˜ 3: Q Chat è¿æ¥ä¸ä¸Š
```bash
# æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸å¯åŠ¨
python manage_server.py status

# ç¡®ä¿ç«¯å£æ²¡æœ‰å†²çª
lsof -i :11235  # å¦‚æœä½¿ç”¨ç‰¹å®šç«¯å£

# é‡å¯ Q Chat
# å®Œå…¨é€€å‡º Q Chatï¼Œé‡æ–°å¯åŠ¨
```

## ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | åŸç‰ˆ | å¢å¼ºç‰ˆ |
|------|------|--------|
| åŸºç¡€å·¥å…· | 4ä¸ª | 4ä¸ª (å…¼å®¹) |
| å¢å¼ºå·¥å…· | 0ä¸ª | 4ä¸ª (æ–°å¢) |
| æ™ºèƒ½æç¤º | 2ä¸ª | 9ä¸ª |
| å†…å®¹è¿‡æ»¤ | âŒ | âœ… |
| æˆªå›¾åŠŸèƒ½ | âŒ | âœ… |
| åŠ¨æ€å†…å®¹ | âŒ | âœ… |
| æ™ºèƒ½æ‰¹é‡ | âŒ | âœ… |
| APIä¾èµ– | æ—  | æ—  |

## ğŸ‰ å‡çº§åçš„æ–°åŠŸèƒ½

### æ–°å¢å·¥å…·
1. `crawl_clean` - æ™ºèƒ½å†…å®¹è¿‡æ»¤
2. `crawl_with_screenshot` - æˆªå›¾åŠŸèƒ½
3. `crawl_dynamic` - åŠ¨æ€å†…å®¹å¤„ç†
4. `crawl_smart_batch` - æ™ºèƒ½æ‰¹é‡å¤„ç†

### æ™ºèƒ½æç¤º
- è‡ªåŠ¨é€‰æ‹©æœ€ä½³å·¥å…·
- å†…å®¹ç±»å‹è¯†åˆ«
- ä¸“ä¸šåœºæ™¯ä¼˜åŒ–

### ä½¿ç”¨ç¤ºä¾‹
```
ç”¨æˆ·: "å¸®æˆ‘çˆ¬å–è¿™ä¸ªå•†å“é¡µé¢çš„ä¿¡æ¯"
Q: è‡ªåŠ¨é€‰æ‹© crawl_smart_batch + product ç±»å‹

ç”¨æˆ·: "è¿™ä¸ªç½‘ç«™å†…å®¹å¾ˆä¹±ï¼Œå¸®æˆ‘æå–å¹²å‡€çš„å†…å®¹"  
Q: è‡ªåŠ¨é€‰æ‹© crawl_clean

ç”¨æˆ·: "éœ€è¦æˆªå›¾ä¿å­˜è¿™ä¸ªé¡µé¢"
Q: è‡ªåŠ¨é€‰æ‹© crawl_with_screenshot
```

---

**ğŸ’¡ æç¤º**: å‡çº§æ˜¯å®‰å…¨çš„ï¼ŒåŸç‰ˆä¼šè‡ªåŠ¨å¤‡ä»½ï¼Œéšæ—¶å¯ä»¥æ¢å¤ï¼
